â€<!doctype html>
â€<html lang="fa" dir="rtl">
â€<head>
â€<meta charset="utf-8"/>
â€<meta name="viewport" content="width=device-width,initial-scale=1"/>
â€<title>Ø­Ø³Ø§Ø¨Ø¯Ø§Ø± ØµÙˆØªÛŒ</title>
â€<meta name="theme-color" content="#0e7c86"/>
â€<style>
â€html,body{margin:0;padding:0;font-family:Tahoma,system-ui;background:#f7fafb;color:#111}
â€header{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#0e7c86;color:#fff}
â€h1{margin:0;font-size:18px}
â€#pill{font-size:12px;background:#075a62;padding:4px 8px;border-radius:999px}
â€main{padding:12px 16px}
â€#chat{background:#fff;border:1px solid #e6eef2;border-radius:12px;padding:12px;margin-bottom:12px}
â€#log{max-height:38vh;overflow:auto;padding-bottom:8px;display:flex;flex-direction:column}
â€.msg{margin:8px 0;padding:10px;border-radius:8px;max-width:88%}
â€.msg.user{background:#e9f7ff;align-self:flex-end}
â€.msg.bot{background:#f1f5f9;align-self:flex-start}
â€#inputRow{display:flex;gap:8px;margin-top:8px}
â€.mic{padding:10px 12px;border:none;border-radius:8px;background:#0e7c86;color:#fff}
â€.mic.alt{background:#933}
â€.ghost{background:#fff;border:1px solid #cfd8dc;color:#0e7c86;border-radius:8px;padding:10px 12px}
â€#quickRow{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
â€.chip{border:1px solid #cfd8dc;background:#fff;border-radius:20px;padding:6px 10px}
â€.card{background:#fff;border:1px solid #e6eef2;border-radius:12px;padding:12px;margin:8px 0;display:flex;justify-content:space-between}
â€#cards{display:grid;grid-template-columns:1fr;gap:8px}
â€@media(min-width:560px){#cards{grid-template-columns:repeat(3,1fr)}}
â€#txList{list-style:none;padding:0;margin:0}
â€#txList li{background:#fff;border:1px solid #e6eef2;border-radius:10px;padding:10px;margin-bottom:8px;display:flex;justify-content:space-between}
â€.amount.negative{color:#b20000}
â€.amount.positive{color:#0a7f2e}
â€small{color:#6b7280}
â€.big{font-size:18px}
â€.center{display:flex;justify-content:center;gap:8px}
â€</style>
â€</head>
â€<body>
â€<header>
â€  <h1>Ø­Ø³Ø§Ø¨Ø¯Ø§Ø± ØµÙˆØªÛŒ</h1>
â€  <div id="pill">Ù…Ø­Ù„ÛŒ</div>
â€</header>
â€<main>
â€  <section id="chat">
â€    <div id="log" aria-live="polite"></div>
â€    <div id="inputRow">
â€      <button id="micBtn" class="mic">ğŸ¤ Ø´Ø±ÙˆØ¹</button>
â€      <button id="stopBtn" class="mic alt" disabled>â–  ØªÙˆÙ‚Ù</button>
â€      <button id="exportBtn" class="ghost">Ø®Ø±ÙˆØ¬ÛŒ JSON</button>
â€    </div>
â€    <div id="quickRow">
â€      <button class="chip" data-cmd="summary-today">Ø®Ù„Ø§ØµÙ‡ Ø§Ù…Ø±ÙˆØ²</button>
â€      <button class="chip" data-cmd="show-categories">Ø³Ø±ÙØµÙ„â€ŒÙ‡Ø§</button>
â€      <button class="chip" data-cmd="show-checks">Ú†Ú©â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²</button>
â€      <button class="chip" data-cmd="show-installments">Ø§Ù‚Ø³Ø§Ø·</button>
â€      <button class="chip" data-cmd="report-recent">Ø±ÛŒØ²</button>
â€      <button class="chip" data-cmd="report-networth">Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø®Ø§Ù„Øµ</button>
â€    </div>
â€  </section>

â€  <section id="summary">
â€    <h2>Ø®Ù„Ø§ØµÙ‡ Ø³Ø±ÛŒØ¹</h2>
â€    <div id="cards">
â€      <div class="card"><span>Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø®Ø§Ù„Øµ</span><strong id="netWorth">â€”</strong></div>
â€      <div class="card"><span>Ø®Ø±Ø¬ Ø§Ù…Ø±ÙˆØ²</span><strong id="todayExpense">â€”</strong></div>
â€      <div class="card"><span>ÙˆØ§Ø±ÛŒØ²ÛŒ Ø§Ù…Ø±ÙˆØ²</span><strong id="todayIncome">â€”</strong></div>
â€    </div>
â€  </section>

â€  <section id="list">
â€    <h2 id="listTitle">ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±</h2>
â€    <ul id="txList"></ul>
â€  </section>
â€</main>

â€<script>
/* Ø³Ø§Ø¯Ù‡â€ŒØªØ±ÛŒÙ† Ù†Ø³Ø®Ù‡ Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ù…Ø­Ù„ÛŒ Ùˆ ØªØ´Ø®ÛŒØµ Ú¯ÙØªØ§Ø± */
â€const Storage={get(){return JSON.parse(localStorage.getItem('va-db')||'[]')},set(x){localStorage.setItem('va-db',JSON.stringify(x))}};
â€function addTx(note,amount){const d=Storage.get();d.push({note,amount,date:new Date().toISOString()});Storage.set(d);showSummary();}
â€function showSummary(){const list=Storage.get();let inc=0,exp=0;list.forEach(x=>{if(x.amount>0)inc+=x.amount;else exp+=Math.abs(x.amount)});document.getElementById('todayIncome').textContent=inc.toLocaleString('fa-IR')+' Øª';document.getElementById('todayExpense').textContent=exp.toLocaleString('fa-IR')+' Øª';document.getElementById('netWorth').textContent=(inc-exp).toLocaleString('fa-IR')+' Øª';const ul=document.getElementById('txList');ul.innerHTML='';list.slice(-10).reverse().forEach(x=>{const li=document.createElement('li');li.textContent=x.note+' ('+x.amount+')';ul.appendChild(li)});}
â€function say(t){if('speechSynthesis'in window){const u=new SpeechSynthesisUtterance(t);u.lang='fa-IR';speechSynthesis.speak(u);}}
â€function hear(){const R=window.SpeechRecognition||window.webkitSpeechRecognition;if(!R){alert('ØªØ´Ø®ÛŒØµ Ú¯ÙØªØ§Ø± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯');return;}const r=new R();r.lang='fa-IR';r.onresult=e=>{const t=e.results[0][0].transcript;document.getElementById('log').innerHTML+='<div class="msg user">'+t+'</div>';parse(t);};r.start();}
â€function parse(t){if(/Ø®Ø±Ø¬/.test(t)){const n=parseInt(t.replace(/\D/g,''))||0;addTx(t,-n);say('Ø®Ø±Ø¬ Ø«Ø¨Øª Ø´Ø¯');}else if(/Ú¯Ø±ÙØªÙ…|ÙˆØ§Ø±ÛŒØ²/.test(t)){const n=parseInt(t.replace(/\D/g,''))||0;addTx(t,n);say('Ø¯Ø±ÛŒØ§ÙØª Ø«Ø¨Øª Ø´Ø¯');}else if(/Ø®Ù„Ø§ØµÙ‡/.test(t)){showSummary();say('Ú¯Ø²Ø§Ø±Ø´ Ø¨Ù‡â€ŒØ±ÙˆØ² Ø´Ø¯');}else{say('Ù†ÙÙ‡Ù…ÛŒØ¯Ù…ØŒ Ø¨Ú¯Ùˆ Ø®Ø±Ø¬ Ú©Ø±Ø¯Ù… ÛŒØ§ Ú¯Ø±ÙØªÙ….');}}
â€document.getElementById('micBtn').onclick=hear;
â€document.getElementById('exportBtn').onclick=()=>{const blob=new Blob([localStorage.getItem('va-db')||'[]'],{type:'application/json'});const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='va-backup.json';a.click();};
â€showSummary();
â€</script>
â€</body>
â€</html>
